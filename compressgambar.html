<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compress Images</title>
    <link rel="icon" href="assets/img/iconjpg.jpg" type="image/jpg">
    <link rel="stylesheet" href="css/compressgambar.css">
</head>
<body>
    <div class="container">
        <div class="marquee" id="marquee">
            <p id="marqueeText">SELAMAT DATANG - MARKETING INDOGROSIR - SUB DIVISI DESAIN GRAFIS
                <img src="assets/img/igr.png" alt="Logo Indogrosir" class="marquee-logo">
            </p>
        </div>
        <main class="main">
            <section class="left-panel">
                <h2>KOMPRESI GAMBAR</h2>
                <div class="penjelasan2">
                    <p>Website ini tidak bisa compress gambar berformat TIF/tiff.</p>
                </div>
                <div class="drop-section" id="drop-section">
                    <input type="file" id="image" name="image" accept="image/*" multiple style="display: none;">
                    <p>Drag & Drop gambar di sini, gan <br> untuk mengompres gambar</p>
                    <div id="file-list"></div>
                </div>

                <div class="button-section">
                    <button id="toggle-size-settings-btn">Atur Ukuran Output Gambar</button>
                </div>
            
                <div id="size-settings" class="size-settings">
                    <div class="tab-section">
                        <div class="tab-content active" id="percentage-tab">
                            <label for="percentage-slider">Persentase:</label>
                            <input type="range" id="percentage-slider" min="1" max="100" value="100">
                            <input type="number" id="percentage-input" min="1" max="100" value="100">
                            <p>Dalam Persen (%)</p>
                        </div>
                        <h6>Mohon diperhatikan, jika menggunakan fitur ini. Gambar anda mungkin menjadi <b><u>tidak optimal</u></b> lagi karena sudah di-compress. Tutup slider ini atau tekan tombol Batal di bawah untuk membatalkan fitur.</h6>
                    </div>
                    <div class="button-section">
                        <button id="cancel-size-settings-btn">Batal</button>
                    </div>
                </div>

                <div class="button-section">
                    <button id="compress-btn">Kompres Gambar-mu Kawan</button>
                    <button id="reset-btn">Masukan Gambar Baru</button>
                </div>
                
                <div class="penjelasan">
                    <h3>Penjelasan</h3>
                    <p>Website ini secara khusus digunakan untuk mengompres file gambar. Kamu bisa drag and drop saja file gambarmu atau tekan field itu untuk mengupload file gambar kamu. Kamu juga bisa mengatur ukuran gambarmu di sini.</p>
                </div>
            </section>
            <section class="right-panel">
                <h2>DISPLAY HASIL</h2>
                <div class="button-section">
                    <button id="download-btn" style="display:none;">Download Semua Gambar</button>
                </div>
                <div class="file-display" id="file-display">
                    <div id="output-file-list"></div>
                </div>
                <p>This engine is exclusively crafted for Indogrosir Design Team</p>
            </section>
        </main>
    </div>
    <footer>
        <p>&copy; Marketing Indogrosir Sub Divisi Desain Grafis 2024</p>
    </footer>
    <div id="loading-popup" class="loading-popup" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Lagi diproses... Mohon tunggu ya mas...</p>
    </div>
    <script defer src="js/compressgambar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/utif@3.1.0/UTIF.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.min.js"></script>
    <script>
        // Daftar username admin
        const adminUsers = ["sebastian", "naufal"];
        const adminSpecial = ["admin"];
    
        // Fungsi untuk mengambil nilai cookie
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }
    
        const loggedIn = getCookie('loggedIn');
        const username = getCookie('username');
    
        // Cek apakah pengguna sudah login dan username tersedia
        if (!loggedIn || !username) {
            // Dapatkan nama halaman saat ini
            const currentPage = window.location.pathname.split('/').pop();
    
            // Jika pengguna tidak berada di index.html atau login.html, redirect ke halaman login
            if (currentPage !== 'index.html' && currentPage !== 'login.html') {
                window.location.href = 'login.html'; // Atau 'index.html' sesuai kebutuhan Anda
            }
        } else {
            // Perbarui teks marquee dengan menyertakan username
            const marqueeText = document.getElementById('marqueeText');
            marqueeText.innerHTML = `SELAMAT DATANG <strong>${username.toUpperCase()}</strong> DI WEBSITE MARKETING INDOGROSIR - SUB DIVISI DESAIN GRAFIS <img src="assets/img/igr.png" alt="Logo Indogrosir" class="marquee-logo">`;
        }
    
        // Event listener untuk klik pada marquee
        document.getElementById('marquee').addEventListener('click', function() {
            const username = getCookie('username');
    
            if (username && adminUsers.includes(username.toLowerCase())) {
                // Jika user adalah admin, redirect ke admin.html
                window.location.href = 'admin.html';
            } if (username && adminSpecial.includes(username.toLowerCase())) {
                // Jika user adalah admin, redirect ke admin.html
                window.location.href = 'main_admin.html';
            } else {
                // Jika bukan admin, redirect ke login.html atau index.html
                window.location.href = 'main.html'; // Atau 'index.html' sesuai preferensi Anda
            }
        });
    </script>
</body>
</html>
