<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Print Harga Hemat</title>
    <link rel="icon" href="assets/img/iconjpg.jpg" type="image/jpg">
    <link rel="stylesheet" href="css/print.css">
</head>
<body>
    <div class="container">
        <div class="marquee" id="marquee">
            <p id="marqueeText">SELAMAT DATANG - MARKETING INDOGROSIR - SUB DIVISI DESAIN GRAFIS
                <img src="assets/img/igr.png" alt="Logo Indogrosir" class="marquee-logo">
            </p>
        </div>
        <main class="main">
            <section class="left-panel">
                <h2>PRINT HARGA HEMAT</h2>
                <div class="drop-section" id="drop-section">
                    <input type="file" id="pdf" name="pdf" accept=".pdf" multiple style="display: none;">
                    <p>Drag & Drop PDF-nya di sini gan</p>
                    <div id="file-list"></div>
                </div>
                <div class="button-section">
                    <button id="merge-btn">Proses Gan</button>
                    <button id="reset-btn">Masukan PDF Baru</button>
                </div>
                <div class="penjelasan">
                    <h3>Penjelasan</h3>
                    <p>Website ini secara khusus digunakan untuk print Harga Hemat secara otomatis, caranya adalah masukkan saja semua PDF harga hemat yang ingin dicetak. Lalu klik tombol "Proses Gan". Website ini akan mengubah dua halaman Harga Hemat menjadi lembar yang bersampingan. Dan semua PDF yang diinput akan dijadikan 1 PDF saja. Kalian hanya tinggal print.</p>
                </div>
            </section>
            <section class="right-panel">
                <h2>DISPLAY HASIL</h2>
                <div class="qr-display" id="qr-display">
                </div>
                <div class="button-section">
                    <button id="download-btn" style="display:none;">Download PDF Hasilnya</button>
                </div>
                <p>This engine is exclusively crafted for Indogrosir Design Team</p>
            </section>
        </main>
        
    </div>
    <!-- Footer -->
    <footer>
        <p>&copy; Marketing Indogrosir Sub Divisi Desain Grafis 2024</p>
    </footer>

    <!-- Loading Popup -->
    <div id="loading-popup" class="loading-popup" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Lagi diproses... Mohon tunggu ya mas...</p>
    </div>

    <!-- Scripts -->
    <!-- PDF.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <!-- PDF.js Worker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js"></script>
    <!-- Initialize PDF.js Worker -->
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';
    </script>
    <!-- PDF-Lib Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>

    <!-- Custom Scripts -->
    <script defer src="js/print.js"></script>
    <script>
        // Daftar username admin
        const adminUsers = ["sebastian", "naufal"];
        const adminSpecial = ["admin"];
    
        // Fungsi untuk mengambil nilai cookie
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }
    
        const loggedIn = getCookie('loggedIn');
        const username = getCookie('username');
    
        // Cek apakah pengguna sudah login dan username tersedia
        if (!loggedIn || !username) {
            // Dapatkan nama halaman saat ini
            const currentPage = window.location.pathname.split('/').pop();
    
            // Jika pengguna tidak berada di index.html atau login.html, redirect ke halaman login
            if (currentPage !== 'index.html' && currentPage !== 'login.html') {
                window.location.href = 'login.html'; // Atau 'index.html' sesuai kebutuhan Anda
            }
        } else {
            // Perbarui teks marquee dengan menyertakan username
            const marqueeText = document.getElementById('marqueeText');
            marqueeText.innerHTML = `SELAMAT DATANG <strong>${username.toUpperCase()}</strong> DI WEBSITE MARKETING INDOGROSIR - SUB DIVISI DESAIN GRAFIS <img src="assets/img/igr.png" alt="Logo Indogrosir" class="marquee-logo">`;
        }
    
        // Event listener untuk klik pada marquee
        document.getElementById('marquee').addEventListener('click', function() {
            const username = getCookie('username');
    
            if (username && adminUsers.includes(username.toLowerCase())) {
                // Jika user adalah admin, redirect ke admin.html
                window.location.href = 'admin.html';
            } if (username && adminSpecial.includes(username.toLowerCase())) {
                // Jika user adalah admin, redirect ke admin.html
                window.location.href = 'main_admin.html';
            } else {
                // Jika bukan admin, redirect ke login.html atau index.html
                window.location.href = 'main.html'; // Atau 'index.html' sesuai preferensi Anda
            }
        });
    </script>
</body>
</html>
